# Обновления системы онлайн-статуса и UI

## Что изменено:

### 1. Система онлайн-статуса
- Обновление каждые 5 секунд (вместо 5 минут)
- Пользователь считается офлайн через 10 секунд неактивности
- Реальное время отслеживания активности

### 2. UI улучшения
- Убрана надпись "Нажмите чтобы открыть"
- Увеличены аватарки (45px вместо 40px)
- Больше места для имен пользователей
- Улучшенное отображение статусов и счетчиков

### 3. Сортировка чатов
- Чаты сортируются по последней активности
- При отправке сообщения чат поднимается наверх
- Работает для отправителя и получателя

### 4. Новые поля в базе данных
- `User.last_seen` - время последней активности
- `User.is_online` - статус онлайн/офлайн
- `Chat.last_activity` - время последней активности в чате

## Запуск:

1. Запустите миграцию (если база уже существует):
```bash
python migrate_online_system.py
```

2. Запустите приложение:
```bash
python run_with_cloudflare.py
```

## Особенности:
- Система автоматически создаст новые поля при первом запуске
- Онлайн-статус обновляется в реальном времени через SocketIO
- Чаты автоматически сортируются по активности