<!DOCTYPE html>
<html>
<head>
    <title>Тест уведомлений</title>
</head>
<body>
    <h1>Тест браузерных уведомлений</h1>
    <button onclick="requestPermission()">Запросить разрешение</button>
    <button onclick="showTestNotification()">Показать тестовое уведомление</button>
    
    <script>
        function requestPermission() {
            if ('Notification' in window) {
                Notification.requestPermission().then(function(permission) {
                    console.log('Разрешение на уведомления:', permission);
                    alert('Разрешение: ' + permission);
                });
            } else {
                alert('Браузер не поддерживает уведомления');
            }
        }
        
        function showTestNotification() {
            if (Notification.permission === 'granted') {
                const notification = new Notification('Тестовое уведомление', {
                    body: 'Это тест браузерных уведомлений в Windows',
                    icon: '/static/favicon.ico',
                    tag: 'test-notification'
                });
                
                notification.onclick = function() {
                    alert('Уведомление работает!');
                    notification.close();
                };
                
                setTimeout(() => {
                    notification.close();
                }, 5000);
            } else {
                alert('Разрешение на уведомления не предоставлено');
            }
        }
        
        // Автоматически запрашиваем разрешение при загрузке
        document.addEventListener('DOMContentLoaded', function() {
            if ('Notification' in window && Notification.permission === 'default') {
                requestPermission();
            }
        });
    </script>
</body>
</html>